<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cloud Payment - Login</title>
    <link rel="stylesheet" href="/Front-End/Css/style.css" />
  </head>
  <body>
    <nav>
      <section id="Background">
        <section id="Login">
          <div id="Logo">
            <img src="/Front-End/Assets/Logo 1.svg" alt="" />
          </div>
          <div id="Dados">
            <h1>Bem vindo!</h1>
            <form id="signup-form">
              <input
                type="text"
                id="cpf"
                name="cpf"
                placeholder="Numero do CPF"
              />
              <input
                type="password"
                id="senha"
                name="senha"
                placeholder="Senha"
              />
              <button type="submit" class="Logar">Avan√ßar</button>
            </form>
            <a
              class="Logar"
              id="cad"
              href="http://127.0.0.1:5500/Front-End/Html/Cadastro.html"
            >
              Cadastre-se
            </a>
            <div id="Lembrar">
              <input type="checkbox" name="" id="LembrarC" />
              <label for="LembrarC">Lembrar de mim</label>
            </div>
          </div>
        </section>
      </section>
    </nav>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        document
          .getElementById('signup-form')
          .addEventListener('submit', function (event) {
            event.preventDefault()

            const formData = {
              cpf: document.getElementById('cpf').value,
              senha: document.getElementById('senha').value
            }

            fetch('http://localhost:3000/login', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(formData)
            })
              .then(res => {
                if (res.status === 200) {
                  return res.json()
                } else {
                  throw new Error('Erro ao tentar logar')
                }
              })
              .then(data => {
                console.log(data)
                // window.location.href = 'http://127.0.0.1:5500/Front-End/Html/Home.html'
              })
              .catch(error => {
                console.error('Erro ao tentar logar:', error)
                alert('Erro ao tentar logar: 401')
              })
          })
      })
    </script>
  </body>
</html>
